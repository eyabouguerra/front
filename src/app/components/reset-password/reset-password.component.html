<app-header2></app-header2>

<div class="lola">
  <div class="outer">
    <div class="container">
      <div class="row">
        <div class="offset-md-2 col-md-8 offset-md-2">
          <div class="panel border bg-white form-background">
            <div class="panel-heading">
              <h1 class="pt-3 font-weight-bold tt"><b>Réinitialisation du mot de passe</b></h1>
            </div>

            <div class="panel-body p-3">
              <form [formGroup]="resetForm" (ngSubmit)="onSubmit()" novalidate>

                <!-- Nouveau mot de passe -->
                <div class="form-group pt-3">
                  <div class="input-field">
                    <span class="fa fa-lock p-2"></span>
                    <input
                      type="password"
                      formControlName="newPassword"
                      placeholder="Nouveau mot de passe"
                      class="form-control"
                    />
                  </div>
                  <small *ngIf="newPassword?.invalid && newPassword?.touched" class="text-danger">
                    Mot de passe requis (min. 6 caractères).
                  </small>
                </div>

                <!-- Confirmation mot de passe -->
                <div class="form-group pt-2">
                  <div class="input-field">
                    <span class="fa fa-lock p-2"></span>
                    <input
                      type="password"
                      formControlName="confirmPassword"
                      placeholder="Confirmez le mot de passe"
                      class="form-control"
                    />
                  </div>
                  <small *ngIf="confirmPassword?.touched && newPassword?.value !== confirmPassword?.value" class="text-danger">
                    Les mots de passe ne correspondent pas.
                  </small>
                </div>

                <!-- Bouton de réinitialisation -->
                <button type="submit" class="btn btn-block btn-outline-dark mt-4 w-100 btn-lg" [disabled]="resetForm.invalid || isLoading">
                  <span *ngIf="!isLoading"><b>Réinitialiser</b></span>
                  <span *ngIf="isLoading">
                    <span class="spinner-border spinner-border-sm"></span> <b>Envoi...</b>
                  </span>
                </button>

                <!-- Message d'information -->
                <div *ngIf="message" class="alert alert-warning mt-3 text-center">
                  <b>{{ message }}</b>
                </div>

                <!-- Retour au login -->
                <div class="text-center pt-4 text-muted">
                  <a routerLink="/login" class="login">Retour à la connexion</a>
                </div>

              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
